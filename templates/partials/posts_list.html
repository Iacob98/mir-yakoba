{% if posts %}
<div class="space-y-6{% if page > 1 %} mt-6{% endif %}">
    {% for post in posts %}
    <a href="/posts/{{ post.slug }}" class="block">
        <article class="bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition cursor-pointer">
            {% if post.featured_image %}
            <img src="{{ post.featured_image }}"
                 alt="{{ post.title }}"
                 class="w-full h-48 object-cover">
            {% endif %}

            <div class="p-4 sm:p-6">
                <div class="flex flex-wrap gap-2 mb-2">
                    {% if post.is_pinned %}
                    <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                        üìå –ó–∞–∫—Ä–µ–ø–ª–µ–Ω–æ
                    </span>
                    {% endif %}
                    {% if post.visibility.value != 'public' %}
                    <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full
                        {% if post.visibility.value == 'premium_2' %}bg-purple-100 text-purple-800
                        {% elif post.visibility.value == 'premium_1' %}bg-blue-100 text-blue-800
                        {% else %}bg-gray-100 text-gray-800{% endif %}">
                        {{ post.visibility.value | replace('_', ' ') | title }}
                    </span>
                    {% endif %}
                </div>

                <h2 class="text-xl font-bold mb-2 hover:text-blue-600 transition">
                    {{ post.title }}
                </h2>

                {% if post.excerpt %}
                <p class="text-gray-600 mb-4">{{ post.excerpt }}</p>
                {% endif %}

                <div class="flex items-center justify-between text-sm text-gray-500">
                    <span>{% if post.published_at %}{{ post.published_at.strftime('%d.%m.%Y') }}{% else %}–ß–µ—Ä–Ω–æ–≤–∏–∫{% endif %}</span>
                    <span>{{ post.view_count }} –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤</span>
                </div>
            </div>
        </article>
    </a>
    {% endfor %}
</div>

{% if has_more %}
<div hx-get="/partials/posts?page={{ next_page }}"
     hx-trigger="revealed"
     hx-swap="outerHTML"
     class="flex justify-center py-8">
    <div class="animate-spin h-8 w-8 border-4 border-blue-500 border-t-transparent rounded-full"></div>
</div>
{% endif %}

{% else %}
<div class="text-center py-12">
    <p class="text-gray-500">–ü–æ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –ó–∞–≥–ª—è–Ω–∏—Ç–µ –ø–æ–∑–∂–µ!</p>
</div>
{% endif %}
