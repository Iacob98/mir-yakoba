<div class="border-l-2 border-gray-200 pl-4 py-3" id="comment-{{ comment.id }}">
    <div class="flex items-start justify-between">
        <div class="flex items-center space-x-2 mb-2">
            <span class="font-medium text-gray-900">{{ comment.author.display_name }}</span>
            <span class="text-gray-400 text-sm">{{ comment.created_at.strftime('%b %d, %Y at %H:%M') }}</span>
        </div>
        {% if user and (user.id == comment.author_id or user.is_admin) %}
        <button type="button"
                hx-delete="/api/v1/comments/{{ comment.id }}"
                hx-target="#comment-{{ comment.id }}"
                hx-swap="outerHTML"
                hx-confirm="Delete this comment?"
                class="text-gray-400 hover:text-red-500 text-sm">
            Delete
        </button>
        {% endif %}
    </div>
    <p class="text-gray-700 whitespace-pre-wrap">{{ comment.content }}</p>

    {% if comment._replies is defined and comment._replies %}
    <div class="mt-3 space-y-3">
        {% for reply in comment._replies %}
        {% include "partials/comment.html" with context %}
        {% endfor %}
    </div>
    {% endif %}
</div>
